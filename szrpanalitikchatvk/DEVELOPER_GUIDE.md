# üë®‚Äçüíª –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### **–û–±—â–∞—è —Å—Ö–µ–º–∞:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Telegram Bot  ‚îÇ    ‚îÇ   VK API        ‚îÇ    ‚îÇ   SQLite DB     ‚îÇ
‚îÇ   (aiogram)     ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (aiohttp)     ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (aiosqlite)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚ñº                       ‚ñº                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Scheduler     ‚îÇ    ‚îÇ   Analyzer      ‚îÇ    ‚îÇ   CSV Parser    ‚îÇ
‚îÇ   (asyncio)     ‚îÇ    ‚îÇ   (async)       ‚îÇ    ‚îÇ   (csv)         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
szrpanalitikchatvk/
‚îú‚îÄ‚îÄ main.py                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ database_sqlite.py      # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ vk_client.py           # VK API –∫–ª–∏–µ–Ω—Ç
‚îú‚îÄ‚îÄ analyzer.py            # –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —á–∞—Ç–æ–≤
‚îú‚îÄ‚îÄ telegram_bot.py        # Telegram –±–æ—Ç
‚îú‚îÄ‚îÄ scheduler.py           # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
‚îú‚îÄ‚îÄ csv_parser.py          # –ü–∞—Ä—Å–µ—Ä CSV
‚îú‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env.example          # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ .gitignore            # Git –∏—Å–∫–ª—é—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ Dockerfile            # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ docker-compose.yml    # Docker Compose
‚îú‚îÄ‚îÄ start.bat             # Windows –∑–∞–ø—É—Å–∫
‚îú‚îÄ‚îÄ install.sh            # Linux —É—Å—Ç–∞–Ω–æ–≤–∫–∞
‚îî‚îÄ‚îÄ build_exe.bat         # –°–æ–∑–¥–∞–Ω–∏–µ exe
```

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### **1. main.py - –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞**
```python
class VKSimpleBot:
    def __init__(self):
        self.telegram_bot = TelegramBot()
        self.scheduler = Scheduler()
    
    async def start(self):
        await db.initialize()
        self.scheduler.set_telegram_bot(self.telegram_bot)
        asyncio.create_task(self.scheduler.start())
        await self.telegram_bot.start_polling()
```

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

### **2. config.py - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
```python
class Config:
    TELEGRAM_BOT_TOKEN = os.getenv('TELEGRAM_BOT_TOKEN')
    TELEGRAM_ADMIN_CHAT_ID = int(os.getenv('TELEGRAM_ADMIN_CHAT_ID', '1383508355'))
    RATE_LIMIT_DELAY = 0.2
    
    @classmethod
    def get_vk_chats(cls) -> List[Dict[str, Any]]:
        # –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —á–∞—Ç–æ–≤ –∏–∑ CSV
```

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–∞—Ç–æ–≤

### **3. database_sqlite.py - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**
```python
class Database:
    async def initialize(self):
        # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
        # chats, users, messages, daily_stats, telegram_users
    
    async def save_telegram_user(self, user_id, username, first_name):
        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Telegram
    
    async def get_chats_stats(self):
        # –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —á–∞—Ç–æ–≤
```

**–°—Ö–µ–º–∞ –ë–î:**
- `chats` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —á–∞—Ç–∞—Ö
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ VK
- `messages` - —Å–æ–æ–±—â–µ–Ω–∏—è
- `daily_stats` - –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `telegram_users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Telegram

### **4. vk_client.py - VK API –∫–ª–∏–µ–Ω—Ç**
```python
class VKClient:
    async def _make_request(self, method, params):
        # HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ VK API —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
    
    async def get_chat_members(self):
        # –ü–æ–ª—É—á–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —á–∞—Ç–∞
    
    async def get_chat_messages(self):
        # –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—Ç–∞
    
    async def check_users_status(self, user_ids):
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∞–∫—Ç–∏–≤–µ–Ω/—É–¥–∞–ª–µ–Ω/–∑–∞–±–∞–Ω–µ–Ω)
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –ª–∏–º–∏—Ç–æ–≤ API (3 –∑–∞–ø—Ä–æ—Å–∞/—Å–µ–∫)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- Retry –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—à–∏–±–æ–∫
- –ë–∞—Ç—á–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤

### **5. analyzer.py - –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä**
```python
class ChatAnalyzer:
    async def analyze_all_chats(self, batch_size=100):
        # –ê–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö —á–∞—Ç–æ–≤ —Å –±–∞—Ç—á–∏–Ω–≥–æ–º
    
    async def _analyze_single_chat(self, group_id, token, chat_name):
        # –ê–Ω–∞–ª–∏–∑ –æ–¥–Ω–æ–≥–æ —á–∞—Ç–∞
    
    def _analyze_user_duplication(self):
        # –ê–Ω–∞–ª–∏–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    
    async def _save_to_database_optimized(self, results):
        # –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
```

**–ê–ª–≥–æ—Ä–∏—Ç–º –∞–Ω–∞–ª–∏–∑–∞:**
1. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
2. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. –ê–Ω–∞–ª–∏–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ–∂–¥—É —á–∞—Ç–∞–º–∏
4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –ë–î

### **6. telegram_bot.py - Telegram –±–æ—Ç**
```python
class TelegramBot:
    def __init__(self):
        self.bot = Bot(token=config.TELEGRAM_BOT_TOKEN)
        self.dp = Dispatcher()
    
    async def handle_document(self, message):
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ CSV —Ñ–∞–π–ª–æ–≤
    
    async def handle_analyze_callback(self, callback):
        # –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ —á–∞—Ç–æ–≤
    
    async def _create_stats_csv_from_csv(self, stats):
        # –°–æ–∑–¥–∞–Ω–∏–µ CSV –æ—Ç—á–µ—Ç–∞
```

**–§—É–Ω–∫—Ü–∏–∏:**
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è CSV —Ñ–∞–π–ª–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–æ–º —á–∞—Ç–æ–≤
- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### **7. scheduler.py - –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫**
```python
class Scheduler:
    async def start(self):
        # –ó–∞–ø—É—Å–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ —Å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º
    
    async def _run_daily_analysis(self):
        # –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤ 02:00
    
    async def _send_daily_report(self, results):
        # –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
```

**–§—É–Ω–∫—Ü–∏–∏:**
- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤ 16:15
- –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–æ–≤ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### **8. csv_parser.py - –ü–∞—Ä—Å–µ—Ä CSV**
```python
class CSVParser:
    def parse_csv(self) -> List[Dict[str, Any]]:
        # –ü–∞—Ä—Å–∏–Ω–≥ CSV —Ñ–∞–π–ª–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
    
    def save_csv(self, csv_content: str) -> bool:
        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ CSV —Ñ–∞–π–ª–∞
    
    def is_csv_available(self) -> bool:
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ñ–∞–π–ª–∞
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ BOM (Byte Order Mark)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ UTF-8 –∫–æ–¥–∏—Ä–æ–≤–∫–∏

## üîÑ –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### **1. –ó–∞–≥—Ä—É–∑–∫–∞ CSV:**
```
User ‚Üí Telegram ‚Üí CSV Parser ‚Üí File System
```

### **2. –ê–Ω–∞–ª–∏–∑ —á–∞—Ç–æ–≤:**
```
CSV Parser ‚Üí Analyzer ‚Üí VK Client ‚Üí VK API
                ‚Üì
            Database ‚Üê Results
```

### **3. –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö:**
```
Database ‚Üí Telegram Bot ‚Üí CSV Generator ‚Üí User
```

### **4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑:**
```
Scheduler ‚Üí Analyzer ‚Üí VK API ‚Üí Database ‚Üí Telegram Users
```

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –¥–æ 20 —á–∞—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **–ë–∞—Ç—á–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤** - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ API –≤—ã–∑–æ–≤–æ–≤
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### **–õ–∏–º–∏—Ç—ã:**
- **VK API** - 3 –∑–∞–ø—Ä–æ—Å–∞/—Å–µ–∫ –Ω–∞ —Ç–æ–∫–µ–Ω
- **–ü–∞–º—è—Ç—å** - ~50MB –¥–ª—è 1000 —á–∞—Ç–æ–≤
- **–í—Ä–µ–º—è** - ~1 —Å–µ–∫ –Ω–∞ —á–∞—Ç —Å 1000 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:**

#### 1. –ù–æ–≤—ã–π —Ç–∏–ø –∞–Ω–∞–ª–∏–∑–∞:
```python
# –í analyzer.py
async def _analyze_custom_metric(self, chat_data):
    # –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞
    return custom_result
```

#### 2. –ù–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ Telegram:
```python
# –í telegram_bot.py
@self.dp.message(Command("new_command"))
async def handle_new_command(message):
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã
```

#### 3. –ù–æ–≤–æ–µ –ø–æ–ª–µ –≤ –ë–î:
```python
# –í database_sqlite.py
async def initialize(self):
    await self.connection.execute("""
        ALTER TABLE chats ADD COLUMN new_field TEXT
    """)
```

### **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
pytest test_bot.py -v

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
pytest test_bot.py::TestCSVParser -v

# –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
pytest --cov=. --cov-report=html
```

### **–û—Ç–ª–∞–¥–∫–∞:**
```python
# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
from loguru import logger
logger.info("Debug message")
logger.error(f"Error: {e}")

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
logger.debug(f"Current state: {state}")
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### **Docker:**
```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t vk-bot .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -d --name vk-bot vk-bot

# –õ–æ–≥–∏
docker logs -f vk-bot
```

### **Systemd (Linux):**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl enable vk-bot
sudo systemctl start vk-bot

# –°—Ç–∞—Ç—É—Å
sudo systemctl status vk-bot

# –õ–æ–≥–∏
sudo journalctl -u vk-bot -f
```

### **Windows Service:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–∫ —Å–ª—É–∂–±–∞
sc create "VK Bot" binPath="C:\path\to\python.exe C:\path\to\main.py"
sc start "VK Bot"
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
TELEGRAM_BOT_TOKEN=your_token
TELEGRAM_ADMIN_CHAT_ID=your_chat_id

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ
RATE_LIMIT_DELAY=0.2
BATCH_SIZE=100
SCHEDULE_TIME=02:00
```

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
```python
# –í config.py
RATE_LIMIT_DELAY = 0.2  # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
BATCH_SIZE = 100        # –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
MAX_CONCURRENT = 20     # –ú–∞–∫—Å–∏–º—É–º –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —á–∞—Ç–æ–≤
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### **–ú–µ—Ç—Ä–∏–∫–∏:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —á–∞—Ç–æ–≤
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ API
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

### **–õ–æ–≥–∏:**
```python
# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤
2024-01-01 02:00:01 | INFO | Starting daily analysis
2024-01-01 02:00:05 | INFO | Chat 123456 analyzed: 100 members
2024-01-01 02:00:10 | ERROR | VK API error: Rate limit exceeded
```

### **–ê–ª–µ—Ä—Ç—ã:**
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ API
- –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å VK API
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∞–Ω–∞–ª–∏–∑–∞

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### **–ó–∞—â–∏—Ç–∞ —Ç–æ–∫–µ–Ω–æ–≤:**
- –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–∑ Git (.gitignore)
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –≤ production

### **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ CSV
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ VK API
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞

### **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞:**
- –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Telegram
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —á–∞—Ç–∞–º
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
